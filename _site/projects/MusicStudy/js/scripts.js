function shuffle(r){var e,t,o;for(o=r.length;o;o-=1)e=Math.floor(Math.random()*o),t=r[o-1],r[o-1]=r[e],r[e]=t;console.log(r)}var shown=!1,random=!1,ctr=0,numSongs;$(function(){function r(r){return ctr>=numSongs-1?(shuffle(r),ctr=0):ctr++,r[ctr]}function e(r){switch(r.file.substring(r.file.lastIndexOf("."))){case".mp3":$("#mp3_source").attr("src","music/mp3/"+r.file);break;case".m4a":$("#mp3_source").attr("src","music/m4a/"+r.file)}aud=document.getElementById("player"),aud.load(),aud.addEventListener("loadeddata",function(){aud.currentTime=t(aud),aud.play()})}function t(r){return random?Math.floor(Math.random()*(r.duration-45)):0}function o(r){$("#title").val().length>0&&r.title.toLowerCase()===$("#title").val().toLowerCase()?$("#title_correct").html("Correct!"):$("#title_correct").html(r.title),$("#date").val().length>0&&r.date.toLowerCase()===$("#date").val().toLowerCase()?$("#date_correct").html("Correct!"):$("#date_correct").html(r.date),$("#composer").val().length>0&&r.composer.toLowerCase()===$("#composer").val().toLowerCase()?$("#composer_correct").html("Correct!"):$("#composer_correct").html(r.composer),$("#genre").val().length>0&&r.genre.toLowerCase()===$("#genre").val().toLowerCase()?$("#genre_correct").html("Correct!"):$("#genre_correct").html(r.genre),$("#performing_forces").val().length>0&&r.performing_forces.toLowerCase()===$("#performing_forces").val().toLowerCase()?$("#performing_forces_correct").html("Correct!"):$("#performing_forces_correct").html(r.performing_forces),$("#sub").html("Change song!")}function c(){$("#ogg_source, #mp3_source, #mp4_source").attr("src",""),$("#title_correct, #date_correct, #composer_correct, #genre_correct, #performing_forces_correct").html("&nbsp;"),$("#title, #date, #genre, #composer, #performing_forces").val(function(){return this.defaultValue})}d3.csv("data.csv",function(t){var n=t;numSongs=n.length,shuffle(n);var a=r(n);e(a),$("#sub").click(function(){shown?(c(a),a=r(n),e(a)):o(a),shown=!shown}),$("#rand").click(function(){random=!random,$("#rand").html(function(){return random?"Start from Beginning":"Random Start"})})})});